<!DOCTYPE html>

<html lang="en">

<head>
    <title>Etch-A-Sketch</title>

    <meta charset="UTF-8">

    <link rel="icon" type="png" href="image/robot_icon.png">

    <!-- <link rel="stylesheet" href="css/style.css?v=1.0"> -->
    <style>
        body
        {
            background-color: #7793ab;
        }
        #container
        {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-flow: row;
        }
    </style>
</head>

<body>
    <div id="container"></div>
    
    <!-- <script src="js/script.js"></script> -->
    <script>
        const container = document.getElementById("container");
        const grid = document.createElement("div");
        const buttons = document.createElement("div");
        const gridSizeButton = document.createElement("button");
        const gridDichotomyButton = document.createElement("button");
        const gridGradientButton = document.createElement("button");
        const gridColorButton = document.createElement("button");
        let boxSize;
        let box;
        let boxHover
        let backColor;
        let R, G, B;
        let gridColorOption = "dichotomy";
        
        container.appendChild(grid);
        container.appendChild(buttons);
        buttons.appendChild(gridSizeButton);
        buttons.appendChild(gridDichotomyButton);
        buttons.appendChild(gridGradientButton);
        buttons.appendChild(gridColorButton);

        buttons.style.display = "flex";
        buttons.style.flexFlow = "column";
        buttons.style.justifyContent = "center";
        buttons.style.alignContent = "center";
        buttons.style.margin = "5px";
        Array.from(buttons.childNodes).forEach(e =>
        {
            e.style.height = "80px";
            e.style.width = "115px";
            e.style.margin = "5px";
            e.style.textAlign = "center";
        });

        grid.style.display = "grid";
        grid.style.height = "1000px";
        grid.style.width = "1000px";
        grid.style.borderStyle = "solid";
        grid.style.borderWidth = "5px";
        grid.style.borderColor = "#1f548c";
        
        gridSizeButton.textContent = "New Grid";
        gridDichotomyButton.textContent = "Style:\nDichotomy";
        gridGradientButton.textContent = "Style:\nGradient";
        gridColorButton.textContent = "Style:\nColor";
        
        gridSizeButton.addEventListener("click", () =>
        {
            while (grid.firstChild)
            {
                grid.removeChild(grid.firstChild);
            }
            createGrid()
        });
        gridDichotomyButton.addEventListener("click", () =>
        {
            gridColorOption = "dichotomy";
        });
        gridGradientButton.addEventListener("click", () =>
        {
            gridColorOption = "gradient";
        });
        gridColorButton.addEventListener("click", () =>
        {
            gridColorOption = "color";
        });
        function createGrid()
        {
            while (true)
            {
                boxSize = prompt("What size grid? (1 - 100): ", 16);
                boxSize = Number(boxSize);
                if (boxSize !== NaN && boxSize >= 1 && boxSize <= 100)
                {
                    break;
                }
            }
            grid.style.gridTemplateColumns = "repeat(" + boxSize + ", 1fr)";
            grid.style.gridTemplateRows = "repeat(" + boxSize + ", 1fr)";
            
            for(let i = 0; i < (Math.pow(boxSize, 2)); i++)
            {
                box = document.createElement("div")
                box.classList.add("boxes");
                box.style.backgroundColor = "rgb(255, 255, 255)";
                grid.appendChild(box);
            }
            boxHover = Array.from(document.getElementsByClassName("boxes"));
            
            boxHover.forEach(element =>
            {
                element.addEventListener("mouseenter", () =>
                {
                    switch (gridColorOption)
                    {
                        case "dichotomy":
                            gridDichotomy(element);
                            break;
                        case "gradient":
                            gridGradient(element);
                            break;
                        case "color":
                            gridColor(element);
                            break;
                    }
                });
            });
        }
        function gridDichotomy(element)
        {
            element.style.backgroundColor = "rgb(0, 0, 0)";
        }
        function gridGradient(element)
        {
            backColor = element.style.backgroundColor;
            if (backColor != "rgb(5, 5, 5)" && backColor != "rgb(0, 0, 0)")
            {
                R = (backColor.slice(4, 7)) - 25;
                if (Number.isNaN(R))
                {
                    R = (backColor.slice(4, 6)) - 25;
                }
                G = (backColor.slice(9, 12)) - 25;
                if (Number.isNaN(G))
                {
                    G = (backColor.slice(8, 10)) - 25;
                }
                B = (backColor.slice(14, 17)) - 25;
                if (Number.isNaN(B))
                {
                    B = (backColor.slice(12, 14)) - 25;
                }
                element.style.backgroundColor = "rgb(" + R + ", " + G + ", " + B + ")";
            }else if (backColor == "rgb(5, 5, 5)")
            {
                element.style.backgroundColor = "rgb(0, 0, 0)";
            }
        }
        function gridColor(element)
        {
            R = Math.floor(Math.random() * 255);
            G = Math.floor(Math.random() * 255);
            B = Math.floor(Math.random() * 255);
            element.style.backgroundColor = "rgb(" + R + ", " + G + ", " + B + ")";
        }
    </script>
</body>
</html>